<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MathJax 2.4 vs 2.5</title>
  <link rel="alternate" href="https://feeds.feedburner.com/janmr-blog" title="janmr blog" type="application/rss+xml">
  <link rel="stylesheet" href="/css/main.7614535f90467929.css">
</head>
<body>
  <div id="wrapper">
    <h1><a href="/blog/">janmr blog</a></h1>
    <div class="content">
      <div class="main">        <h2>MathJax 2.4 vs 2.5<br><small><time datetime="2015-03-08">08 March 2015</time></small></h2>
        <div class="post-tags">
          <a class="label" href="/blog/tags/mathjax">mathjax</a> 
        </div>
        <div class="post-body">
          <p>MathJax version 2.5 was <a href="http://www.mathjax.org/mathjax-v2-5-now-available/">released around a month ago</a>. One of that version's features were speed improvements and that's always a good thing. Seen in the light of my recent <a href="/blog/2015/01/mathjax-katex-and-a-lot-of-math">experiments with MathJax and KaTeX</a>, it was straightforward to set up an experiment that compared MathJax versions 2.4 and 2.5 with respect to rendering speed.</p>
<p>All instances of math were set up to be typeset using MathJax, so no KaTeX. A small piece of JavaScript code was added to each blog post in order to load all posts in succession. Each page load was considered done as soon as MathJax emitted its <a href="http://docs.mathjax.org/en/v2.5-latest/startup.html">'End' signal</a>. To have a base case, all posts were also loaded with MathJax <em>disabled</em>, this time loading the next blog post as soon as a page's <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload"><code>load</code> event</a> fired.</p>
<p>The results were as follows:</p>
<ul>
<li>Posts: 47</li>
<li>Math items: 2312, 49 items/post on average</li>
<li><strong>MathJax disabled</strong>: 0.26 s/post on average</li>
<li><strong>MathJax 2.4</strong>: 0.93 s/post on average (0.67 s/post typesetting)</li>
<li><strong>MathJax 2.5, no previews</strong>: 0.89 s/post on average (0.63 s/post typesetting)</li>
<li><strong>MathJax 2.5, with previews</strong>: 1.10 s/post on average (0.84 s/post typesetting)</li>
</ul>
<p>The time spent on typesetting per post is estimated by subtracting the &quot;MathJax disabled&quot; base case from each of the cases with MathJax enabled. The entry &quot;MathJax 2.5, with previews&quot; represents a new feature of MathJax 2.5 where a fast, but limited, rendering method (called CommonHTML) will typeset each math item first, followed by the actual typesetting.</p>
<p>Above a speed improvement of around 5% was achieved when comparing MathJax 2.4 to 2.5 (without previews). Not much, but let's consider the most math-heavy posts only:</p>
<ul>
<li>Posts: 10</li>
<li>Math items: 1330, 133 items/post on average</li>
<li><strong>MathJax disabled</strong>: 0.28 s/post on average</li>
<li><strong>MathJax 2.4</strong>: 2.27 s/post on average (1.98 s/post typesetting)</li>
<li><strong>MathJax 2.5, no previews</strong>: 1.67 s/post on average (1.38 s/post typesetting)</li>
<li><strong>MathJax 2.5, with previews</strong>: 2.33 s/post on average (2.04 s/post typesetting)</li>
</ul>
<p>Here, a considerable difference between the two versions can be observed. The typesetting is close to 30% faster when comparing MathJax 2.5 (no previews) to MathJax 2.4. Quite nice.</p>
<p>So switching to version 2.5 seems like a no-brainer. It's faster and there seems to be no difference in the visual appearance. I have no intention of using the <a href="http://docs.mathjax.org/en/v2.5-latest/options/CHTML-preview.html">CHTML preview extension</a>, however. An annoying page reflow is still needed when switching from the preview to the &quot;real&quot; typesetting and I would rather see the final page as soon as possible. (Note that the preview extension is <em>enabled</em> by default.) My <a href="/blog/2015/01/mathjax-katex-and-a-lot-of-math">use of KaTeX</a> for most of the inline, simple math, also makes the need for a fast preview even smaller.</p>

        </div>
        <div class="page-navigation">
          <div class="prev-post">
            <a href="/blog/2015/03/grouping-typesets-with-mathjax" title="Previous post: Grouping Typesets With MathJax">&laquo; Grouping Typesets With MathJax</a>
          </div>
          <div class="next-post">
            <a href="/blog/2015/04/time-budgets-for-the-web" title="Next post: Time Budgets for the Web">Time Budgets for the Web &raquo;</a>
          </div>
        </div>
        <div id="disqus_thread"></div>
      </div>
      <div class="sidebar">
        <h4>About</h4>
        <p>A blog about mathematics and computer programming by
          <a href="/">Jan Marthedal Rasmussen</a>.</p>
        <h4>Links</h4>
        <p><span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
            <circle cx="2" cy="4" r="2"></circle><circle cx="2" cy="12" r="2"></circle><circle cx="2" cy="20" r="2"></circle><circle cx="2" cy="28" r="2"></circle>
            <rect x="8" y="2" width="24" height="4"></rect><rect x="8" y="10" width="24" height="4"></rect><rect x="8" y="18" width="24" height="4"></rect><rect x="8" y="26" width="24" height="4"></rect>
          </svg>
        </span>
        <a href="/blog/">All posts</a></p>
        <p><span class="icon">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
            <path d="M16 3.038c-.59.26-1.22.437-1.885.517.677-.407 1.198-1.05 1.443-1.816-.634.37-1.337.64-2.085.79-.598-.64-1.45-1.04-2.396-1.04-1.812 0-3.282 1.47-3.282 3.28 0 .26.03.51.085.75-2.728-.13-5.147-1.44-6.766-3.42C.83 2.58.67 3.14.67 3.75c0 1.14.58 2.143 1.46 2.732-.538-.017-1.045-.165-1.487-.41v.04c0 1.59 1.13 2.918 2.633 3.22-.276.074-.566.114-.865.114-.21 0-.41-.02-.61-.058.42 1.304 1.63 2.253 3.07 2.28-1.12.88-2.54 1.404-4.07 1.404-.26 0-.52-.015-.78-.045 1.46.93 3.18 1.474 5.04 1.474 6.04 0 9.34-5 9.34-9.33 0-.14 0-.28-.01-.42.64-.46 1.2-1.04 1.64-1.7z" fill-rule="nonzero"/>
          </svg></span>
          <a href="https://twitter.com/janmarthedal">Twitter profile</a></p>
        <p><span class="icon">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
            <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
          </svg></span>
          <a href="https://github.com/janmarthedal/">GitHub profile</a></p>
        <p><span class="icon">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414">
            <path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194 11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.99 2.194-2.2 2.194C.98 16 0 15.017 0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"/>
          </svg></span>
          <a href="https://feeds.feedburner.com/janmr-blog">Subscribe in a reader</a></p>
        <footer><p class="text-muted">Copyright Jan Marthedal Rasmussen Â© 2019</p></footer>
      </div>
    </div>
  </div>
  <script src="/js/main.9d716cf03cf8bdc8.js" defer></script>
  <script src="https://www.google-analytics.com/analytics.js" defer></script>
</body>
</html>
